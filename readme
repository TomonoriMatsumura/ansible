###################################################
# Ansible 2.4をインストールする
###################################################

2016年5月現在CentOS7においてyumコマンドでインストールされるAnsible 2.3は
不具合が多い。そのためpipからAnsible 2.4をインストールする。

1. Ansibleをインストールする

    yum groupinstall "Development Tools" 
    yum install epel-release
    yum install openssl-devel
    yum install python-devel
    yum install python-pip
    pip install --upgrade pip
    pip install --upgrade setuptools
    pip install git+git://github.com/ansible/ansible.git@devel
    ansible --version


2. 秘密鍵を「~/.ssh」へ配置する

    i.   ユーザー「Ansible」を作成する。
    ii.  ssh-keygenコマンドで鍵ファイルを作成する。
    iii. system_ssh_add-users-and-change-sshd-config-and-firewall で
         ユーザーを対象ノードへ作成する
    iii. 公開鍵ファイルを対象ノードの /home/ios/.ssh へ配置する。

###############################################
# playbookの利用方法
###############################################

1. localhostでplaybookを実行する

    ansible-playbook -i localhost example.yml --ask-vault-pass


2. 「bin」ディレクトリ内にplaybook実行補助スクリプトを作成する

    cd /path/to/ansible/playbooks
    ansible-playbook -i localhost ansible_create_bin.yml --ask-vault-pass

3. 「expect」をインストールする

    bin ディレクトリのシェルスクリプトファイルを実行するには
    expectが必要なのでインストールしておく。

4.  「ANSIBLE_HOST_KEY_CHECKING=False」 でPlaybook実行前に環境変数をシェルに渡す

    bin ディレクトリのシェルスクリプトファイルには全て記述済み
